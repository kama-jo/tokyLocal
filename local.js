(function(){function i(n,t){toky.utils.readCookie("tokyUserId")!=null&&(toky.userId=toky.utils.readCookie("tokyUserId"));toky.userId==0&&(toky.userId=null);var i;try{window.XMLHttpRequest&&(i=new XMLHttpRequest,i.onreadystatechange=function(){},i.open("POST","//www.tokywoky.com/api/HostOrder",!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("GroupId=218&OrderNum="+n+"&Value="+t+"&UserId="+toky.userId))}catch(r){}if(typeof tokyCallbacks!="undefined"&&typeof tokyCallbacks.onOrder!="undefined"){tokyCallbackObject={orderNum:n,value:t};tokyCallbacks.onOrder(tokyCallbackObject)}}var t,n;if(!window.toky||typeof window.toky.utils=="undefined"){if(function(){var n,s,i,r,t,u,e,f,o,h;s=window.deviceToky;n={};window.deviceToky=n;r=window.document.documentElement;h=window.navigator.userAgent.toLowerCase();n.ios=function(){return n.iphone()||n.ipod()||n.ipad()};n.iphone=function(){return!n.windows()&&t("iphone")};n.ipod=function(){return t("ipod")};n.ipad=function(){return t("ipad")};n.android=function(){return!n.windows()&&t("android")};n.androidPhone=function(){return n.android()&&t("mobile")};n.androidTablet=function(){return n.android()&&!t("mobile")};n.blackberry=function(){return t("blackberry")||t("bb10")||t("rim")};n.blackberryPhone=function(){return n.blackberry()&&!t("tablet")};n.blackberryTablet=function(){return n.blackberry()&&t("tablet")};n.windows=function(){return t("windows")};n.windowsPhone=function(){return n.windows()&&t("phone")};n.windowsTablet=function(){return n.windows()&&t("touch")&&!n.windowsPhone()};n.fxos=function(){return(t("(mobile;")||t("(tablet;"))&&t("; rv:")};n.fxosPhone=function(){return n.fxos()&&t("mobile")};n.fxosTablet=function(){return n.fxos()&&t("tablet")};n.meego=function(){return t("meego")};n.cordova=function(){return window.cordova&&"file:"===location.protocol};n.nodeWebkit=function(){return"object"==typeof process};n.mobile=function(){return n.androidPhone()||n.iphone()||n.ipod()||n.windowsPhone()||n.blackberryPhone()||n.fxosPhone()||n.meego()};n.tablet=function(){return n.ipad()||n.androidTablet()||n.blackberryTablet()||n.windowsTablet()||n.fxosTablet()};n.desktop=function(){return!n.tablet()&&!n.mobile()};n.television=function(){var n;for(television=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"],n=0;n<television.length;){if(t(television[n]))return!0;n++}return!1};n.portrait=function(){return window.innerHeight/window.innerWidth>1};n.landscape=function(){return window.innerHeight/window.innerWidth<1};n.noConflict=function(){return window.deviceToky=s,this};t=function(n){return-1!==h.indexOf(n)};e=function(n){var t;return t=new RegExp(n,"i"),r.className.match(t)};i=function(n){var t=null;e(n)||(t=r.className.replace(/^\s+|\s+$/g,""),r.className=t+" "+n)};o=function(n){e(n)&&(r.className=r.className.replace(" "+n,""))};n.ios()?n.ipad()?i("ios ipad tablet"):n.iphone()?i("ios iphone mobile"):n.ipod()&&i("ios ipod mobile"):n.android()?i(n.androidTablet()?"android tablet":"android mobile"):n.blackberry()?i(n.blackberryTablet()?"blackberry tablet":"blackberry mobile"):n.windows()?i(n.windowsTablet()?"windows tablet":n.windowsPhone()?"windows mobile":"desktop"):n.fxos()?i(n.fxosTablet()?"fxos tablet":"fxos mobile"):n.meego()?i("meego mobile"):n.nodeWebkit()?i("node-webkit"):n.television()?i("television"):n.desktop()&&i("desktop");n.cordova()&&i("cordova");u=function(){n.landscape()?(o("portrait"),i("landscape")):(o("landscape"),i("portrait"))};f=Object.prototype.hasOwnProperty.call(window,"onorientationchange")?"orientationchange":"resize";window.addEventListener?window.addEventListener(f,u,!1):window.attachEvent?window.attachEvent(f,u):window[f]=u;u();window.deviceToky=n}.call(this),window.toky={utils:{getDomain:function(){for(var i=0,n=document.domain,r=n.split("."),t="_gd"+(new Date).getTime();i<r.length-1&&document.cookie.indexOf(t+"="+t)==-1;)n=r.slice(-1-++i).join("."),document.cookie=t+"="+t+";domain="+n+";";return document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+n+";",n},createCookie:function(n,t,i){var r,u;i?(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toGMTString()):u="";document.cookie=n+"="+t+u+"; domain=."+toky.utils.getDomain()+"; path=/; SameSite=None; Secure"},readCookie:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null},getCurrentDomain:function(){for(var i=0,n=document.domain,r=n.split("."),t="_gd"+(new Date).getTime();i<r.length-1&&document.cookie.indexOf(t+"="+t)==-1;)n=r.slice(-1-++i).join("."),document.cookie=t+"="+t+";domain="+n+";";return document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+n+";",n},device:deviceToky.noConflict(),getIosVersion:function(){return parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||0},getWebsiteImages:function(){for(var t=document.getElementsByTagName("img"),i=[],n=0;n<t.length;n++)t[n].clientWidth>100&&t[n].clientHeight>100&&t[n].src!="about:blank"&&i.push(t[n].src);return toky.utils.tokyFilter(i,function(n,t,i){return i.indexOf(n)==t})},getViewportSize:function(){var n=window,t=n.innerWidth||0,i=n.innerHeight||0;return{width:t,height:i}},registerEventListener:function(){window.addEventListener?(window.addEventListener("message",toky.eventListener,!1),window.addEventListener("scroll",function(){if(toky.state!=="maximized"){var n=typeof toky_order!="undefined"&&toky_order!=null&&typeof toky_order.num!="undefined"&&toky_order.num!=null&&typeof toky_order.value!="undefined"&&toky_order.value!=null;n||toky.notifications&&toky.notifications.count>0||toky.utils.checkScrollTrigger()}})):window.attachEvent("onmessage",toky.eventListener)},postMessage:function(n){toky.settings.isIframeLoaded&&toky.maximized.htmlFrame.contentWindow.postMessage(n,toky.settings.baseUrl)},checkScrollTrigger:function(){var n=window.scrollY||window.pageYOffset,i=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight,t=i-n;toky.offsetScroll>0&&toky.offsetScrollBottom>0?n<toky.offsetScroll||t<toky.offsetScrollBottom?toky.hooks.triggeredAtScrollOnBadPosition():toky.hooks.triggeredAtScrollOnRightPosition():toky.offsetScroll>0?n<toky.offsetScroll?toky.hooks.triggeredAtScrollOnBadPosition():toky.hooks.triggeredAtScrollOnRightPosition():toky.offsetScrollBottom>0&&(t<toky.offsetScrollBottom?toky.hooks.triggeredAtScrollFromBottomOnBadPosition():toky.hooks.triggeredAtScrollFromBottomOnRightPosition())}},settings:{BEPDomain:null,baseUrl:"https://www.tokywoky.com/",minimizedImageUrl:"//img.tokywoky.com/",group:{groupId:218,groupName:"Air",groupLogoUrl:"https://img.tokywoky.com/logopic/1d536af5-718a-446f-b6ec-21c7106b977b.jpg",groupCategoryId:234,backgroundColorMinimizedTokyMobile:"#5cbd3e",isDeactivated:!1,gotMobile:!1,deactivateQuestionToAdminIfAdminsUnavailable:!0,zIndex:"1",gotWidgetByFeed:!0,chatBotType:"None"},whiteListUrls:["localhost", "monconvilog.fr","monalbus.fr"],isCustomerServiceEnabled:{"234":!1},isCustomerServiceByEmailEnabled:{"234":!1},isIframeLoaded:!1,minimizedImageAlt:"TokyWoky Community Chat : Chat to ask your question"},state:"minimized",previousState:null,stateChanged:function(n){var i=this,t;if(i.state=n,i.state!=="closed"?toky.utils.createCookie("toky_state",n,toky.tokyStateCookieExpiration):toky.utils.createCookie("toky_state",n,toky.tokyStateClosedCookieExpiration),(n==="minimized"||n==="closed")&&(toky.utils.readCookie("tokyUserId")==null||toky.utils.readCookie("tokyUserId")==0||toky.notifications||(toky.notifications={},toky.notifications.iframeNotification=document.createElement("iframe"),t=toky.notifications.iframeNotification,t.src=toky.settings.baseUrl+"WebView/TokyImage/"+(toky.settings.BEPDomain?"":"218"),t.id="tokyFrameImage",t.style.width="0px",t.style.height="0px",t.style.border="none",t.style.display="none",toky.container.html.appendChild(t),toky.notifications.updateNbNotifs=function(n){toky.notifications.count=n;n>0&&toky.container.show();toky.minimized.htmlNotif&&n>0?(toky.minimized.htmlNotif.innerHTML=""+n,toky.minimized.htmlNotif.style.display="block"):toky.minimized.htmlNotif&&(toky.minimized.htmlNotif.style.display="none");toky.closed.htmlNotif&&n>0?(toky.closed.htmlNotif.innerHTML=""+n,toky.closed.htmlNotif.style.display="block"):toky.closed.htmlNotif&&(toky.closed.htmlNotif.style.display="none")})),n==="minimized"?(toky.container.html.style.height=toky.minimized.height,toky.container.html.style.width=toky.minimized.width):n==="closed"?(toky.container.html.style.height=toky.closed.height,toky.container.html.style.width=toky.closed.width):(toky.container.html.style.height="auto",toky.container.html.style.width="auto"),toky.maximized&&toky.maximized.htmlFrame&&toky.maximized.htmlFrame.contentWindow)switch(n){case"closed":toky.utils.postMessage("tokyStateChanged-closed|"+toky.closed._imageMinimized+"|"+toky.minimized._type);break;case"minimized":toky.utils.postMessage("tokyStateChanged-minimized|"+toky.minimized._imageMinimized+"|"+toky.minimized._type);break;case"maximized":i.previousState==="minimized"&&toky.utils.postMessage("tokyStateChanged-maximized|"+toky.minimized._imageMinimized+"|"+toky.minimized._type);i.previousState==="closed"&&toky.utils.postMessage("tokyStateChanged-maximized|"+toky.closed._imageMinimized+"|"+toky.minimized._type)}i.previousState=n},container:{_loadHtml:function(){var n=this,t;n.html=document.createElement("div");n.html.id="toky_container";t=n.html.style;t.position="fixed";t.bottom=n.bottom;t.left=n.left;t.right=n.right;t.zIndex=toky.settings.group.zIndex;t.overflow="hidden";document.body.appendChild(n.html)},open:function(){var n=toky.container;n._loadHtml()},hide:function(){var n=this;n.html.style.display="none"},show:function(){var n=this;n.html.style.display="block"}},maximized:{_loadHtml:function(){var n=this,r,t,u,i;n.html=document.createElement("div");r=n.html.style;r.display="none";r.width=n.width+"px";r.height=n.height+"px";n.htmlFrameContainer=document.createElement("div");t=n.htmlFrameContainer.style;t.width=n.width-10+"px";t.height=n.height-75+"px";t.position="absolute";t.top="5px";t.left="5px";t.boxShadow=n.boxShadow;t.borderRadius=n.borderRadius+"px";t.overflow="hidden";n.htmlFrame=document.createElement("iframe");u=n.htmlFrame.style;u.border="none";u.width="100%";u.height="100%";n.htmlFrame.border="0";i="?zone=null";typeof toky_zone!="undefined"&&(i="?zone="+toky_zone);typeof toky_settings!="undefined"&&JSON&&(i+="&settings="+encodeURI(JSON.stringify(toky_settings)));toky.customerService.isCustomerServiceAvailable().then(function(n){i+="&adminAvailable="+n}).catch(function(){i+="&adminAvailable=false"}).finally(function(){var r=toky.settings.BEPDomain?"":toky.settings.group.groupId,u,t;toky.minimized._type?typeof toky_settings!="undefined"&&toky_settings.isOnlyCustomerService===!0||toky.minimized._type==="ask"?n.htmlFrame.src=toky.settings.baseUrl+"webview/v4/"+r+i+"#/ask-a-question":(u=toky.settings.group.gotWidgetByFeed?"#/answer-a":"#/answer-b",n.htmlFrame.src=toky.settings.baseUrl+"webview/v4/"+r+i+u):n.htmlFrame.src=toky.settings.baseUrl+"webview/v4/"+r+i;n.htmlCross=document.createElement("div");t=n.htmlCross.style;t.width=n.crossCircleSize+"px";t.height=n.crossCircleSize+"px";t.backgroundColor=toky.settings.group.backgroundColorMinimizedTokyMobile?toky.settings.group.backgroundColorMinimizedTokyMobile:"#ff21bb";t.position="absolute";t.bottom=n.crossCircleBottom+"px";t.right=n.crossCircleRight+"px";t.borderRadius=n.crossCircleSize+"px";t.cursor="pointer";n.htmlCross.innerHTML=n.crossInnerHtml;n.htmlCross.onclick=toky.minimized.open;n.htmlFrameContainer.appendChild(n.htmlFrame);n.html.appendChild(n.htmlFrameContainer);n.html.appendChild(n.htmlCross);toky.container.html.appendChild(n.html)})},open:function(n){n&&n.stopPropagation();var t=toky.maximized;t.html||t._loadHtml();toky.closed.html&&(toky.closed.html.style.display="none");toky.minimized.html&&(toky.minimized.html.style.display="none");t.html.style.display="block";toky.stateChanged("maximized")}},minimized:{_type:null,_imageMinimized:null,_loadHtml:function(){var n=this,r,i,t;n.html=document.createElement("div");r=n.html.style;r.position="relative";r.cursor="pointer";r.display="none";n.htmlImg=document.createElement("img");n.htmlImg.alt=toky.settings.minimizedImageAlt;n.htmlImg.src=toky.utils.device.mobile()||toky.utils.device.tablet()?toky.settings.minimizedImageUrl+"groupcategories/"+toky.settings.group.groupCategoryId+"/mobile-minimized.png":typeof toky_settings!="undefined"&&typeof toky_settings.isOnlyCustomerService!="undefined"&&toky_settings.isOnlyCustomerService?toky.settings.minimizedImageUrl+"groupcategories/"+toky.settings.group.groupCategoryId+"/customerservice-first-minimized.png":n._type==="ask"?toky.settings.minimizedImageUrl+"groupcategories/"+toky.settings.group.groupCategoryId+"/tiny-first-minimized.png":toky.settings.minimizedImageUrl+"groupcategories/"+toky.settings.group.groupCategoryId+"/tiny-second-minimized.png";n.html.onclick=toky.maximized.open;toky.minimized._imageMinimized=n.htmlImg.src;toky.utils.device.mobile()||toky.utils.device.tablet()||(n.htmlClose=document.createElement("div"),i=n.htmlClose.style,i.position="absolute",i.width=n.closeSize.width+"px",i.height=n.closeSize.height+"px",i.top=n.closePosition.top+"px",i.right=n.closePosition.right+"px",n.htmlClose.onclick=function(n){toky.hooks.triggeredAtClosedByUser();toky.closed.open(n)},n.html.appendChild(n.htmlClose));n.htmlNotif=document.createElement("div");t=n.htmlNotif.style;t.position="absolute";t.width=n.notifSize.width+"px";t.height=n.notifSize.height+"px";t.top=n.notifPosition.top+"px";t.right=n.notifPosition.right+"px";t.fontFamily=n.notifFontFamily;t.background=n.notifBackground;t.fontSize=n.notifFontSize;t.color=n.notifColor;t.borderRadius="100px";t.textAlign="center";t.lineHeight=n.notifSize.height+"px";t.display="none";toky.notifications&&toky.notifications.count>0&&(n.htmlNotif.innerHTML=""+toky.notifications.count,t.display="block");n.html.appendChild(n.htmlImg);n.html.appendChild(n.htmlNotif);toky.container.html.appendChild(n.html)},open:function(n){var t,i;n&&n.stopPropagation();t=toky.minimized;toky.container&&toky.container.html&&(toky.container.html.style.position="fixed",toky.container.html.style.bottom=toky.container.bottom,toky.container.html.style.top="initial");i=Math.random();t._type=i>t.ratio?"answer":"ask";t.html||t._loadHtml();toky.maximized.html&&(toky.maximized.html.style.display="none");toky.closed.html&&(toky.closed.html.style.display="none");t.html.style.display="block";toky.notifications&&toky.notifications.count!==0||toky.utils.checkScrollTrigger();toky.stateChanged("minimized")}},closed:{_imageMinimized:null,_loadHtml:function(){var n=this,i,t;n.html=document.createElement("div");i=n.html.style;i.position="relative";i.cursor="pointer";i.display="none";n.htmlImg=document.createElement("img");n.htmlImg.alt=toky.settings.minimizedImageAlt;n.htmlImg.src=typeof toky_settings!="undefined"&&typeof toky_settings.isOnlyCustomerService!="undefined"&&toky_settings.isOnlyCustomerService?toky.settings.minimizedImageUrl+"groupcategories/"+toky.settings.group.groupCategoryId+"/customerservice-closed-minimized.png":toky.settings.minimizedImageUrl+"groupcategories/"+toky.settings.group.groupCategoryId+"/tiny-closed-minimized.png";n.html.onclick=function(n){toky.hooks.triggeredAtClickOnClosedMinimized();toky.maximized.open(n)};toky.closed._imageMinimized=n.htmlImg.src;n.htmlNotif=document.createElement("div");t=n.htmlNotif.style;t.position="absolute";t.width=n.notifSize.width+"px";t.height=n.notifSize.height+"px";t.top=n.notifPosition.top+"px";t.right=n.notifPosition.right+"px";t.fontFamily=n.notifFontFamily;t.background=n.notifBackground;t.fontSize=n.notifFontSize;t.color=n.notifColor;t.borderRadius="100px";t.textAlign="center";t.lineHeight=n.notifSize.height+"px";t.display="none";toky.notifications&&toky.notifications.count>0&&(n.htmlNotif.innerHTML=""+toky.notifications.count,t.display="block");n.html.appendChild(n.htmlImg);n.html.appendChild(n.htmlImg);n.html.appendChild(n.htmlNotif);toky.container.html.appendChild(n.html)},open:function(n){n&&n.stopPropagation();var t=toky.closed;t.html||t._loadHtml();toky.minimized.html&&(toky.minimized.html.style.display="none");toky.maximized.html&&(toky.maximized.html.style.display="none");t.html.style.display="block";toky.notifications&&toky.notifications.count!==0||toky.utils.checkScrollTrigger();toky.stateChanged("closed")}},eventListener:function(n){var r,t,u,e,f,o,i,s;if(n.data!=null&&(typeof n.data=="string"||n.data instanceof String)){if(n.origin!==toky.settings.baseUrl.slice(0,-1))return;if(r=document.createElement("pre"),r.innerHTML=n.data,t=r.textContent,t.indexOf("tokySetUserId")!=-1){if(u=parseInt(t.replace("tokySetUserId-","")),!u)return;toky.userId=u;toky.utils.createCookie("tokyUserId",toky.userId,100)}else t.indexOf("tokyGetWebSiteImages")!=-1?(e=toky.utils.getWebsiteImages(),toky.utils.postMessage("tokySendWebsiteImages-"+e.join("|"))):t.indexOf("tokyGetSSODatas")!=-1?typeof toky_auth_apiKey!="undefined"&&typeof toky_auth_message!="undefined"&&typeof toky_auth_hmac!="undefined"&&typeof toky_auth_timestamp!="undefined"?toky.utils.postMessage('tokySetSSODatas-{"tokyAuthApiKey": "'+toky_auth_apiKey+'", "tokyAuthMessage": "'+toky_auth_message+'", "tokyAuthHmac": "'+toky_auth_hmac+'", "tokyAuthTimestamp": "'+toky_auth_timestamp+'"}'):toky.utils.postMessage("tokySetSSODatas-null"):t.indexOf("tokyGetCustomVars")!=-1?(f="",(typeof toky_customVars!="undefined"||typeof toky_customVars!="undefined")&&(f=JSON.stringify(toky_customVars||window.toky_customVars)),toky.utils.postMessage("tokySendCustomVars-"+f)):t.indexOf("tokyImageNotifications-")!=-1?(o=t.replace("tokyImageNotifications-",""),toky.notifications&&toky.notifications.updateNbNotifs(parseInt(o))):t.indexOf("tokyInputFocus")!=-1?toky.utils.device.ios()&&toky.utils.getIosVersion()<13&&toky.state==="maximized"&&document.querySelector("meta[name=viewport]")!=null&&(i=document.querySelector("meta[name=viewport]").content,i.indexOf("minimum-scale")!=-1&&i.indexOf("maximum-scale")!=-1&&document.querySelector("meta[name=viewport]").setAttribute("content",i+", minimum-scale=1.0, maximum-scale=1.0"),setTimeout(function(){toky.container.html.style.position="absolute";toky.container.html.style.top=document.body.scrollTop-toky.maximized.height/toky.maximized.iosUpValue+"px";toky.container.html.style.bottom="initial"},500)):t.indexOf("tokyInputBlur")!=-1?toky.utils.device.ios()&&toky.utils.getIosVersion()<13&&toky.state==="maximized"&&(toky.container.html.style.position="fixed",toky.container.html.style.bottom=toky.container.bottom,toky.container.html.style.top="initial"):t.indexOf("tokyOpenCustomerServiceWidget")!=-1?toky.customerService.open():t.indexOf("tokyGetCustomerServiceChatStatus")!=-1?toky.customerService.isCustomerServiceChatInProgress()?toky.utils.postMessage("tokyCustomerServiceChatStatus-inProgess"):toky.utils.postMessage("tokyCustomerServiceChatStatus-ended"):t.indexOf("tokyGetLastClickedImageMinimized")!==-1?toky.utils.postMessage("tokyGetLastClickedImageMinimized-"+toky.minimized._type+"|"+toky.minimized._imageMinimized):t.indexOf("tokyGetCurrentUrl")!==-1?toky.utils.postMessage("tokyGetCurrentUrl-"+window.location.href):t.indexOf("tokySetIframeLoaded")!==-1?toky.settings.isIframeLoaded=!0:t.indexOf("tokySuggestionSelected-")!==-1&&(s=t.replace("tokySuggestionSelected-",""),toky.settings.group.chatBotType==="DoYouDreamUp"&&(dydu&&dydu.chatbox&&dydu.chatbox.togglePopin("true"),reword&&reword(atob(s)),window.dispatchEvent(new Event("toggleDydu"))))}},customerService:{open:function(){toky.utils.postMessage("tokyOpenCustomerServiceWidget")},isCustomerServiceAvailable:function(){return toky.settings.isCustomerServiceEnabled[toky.settings.group.groupCategoryId]?new Promise(function(n,t){var i=new XMLHttpRequest;i.open("GET",toky.settings.baseUrl+"/api/Admin/Available/"+toky.settings.group.groupId);i.onload=function(){i.status==200?n(i.response):t({status:this.status,statusText:i.statusText})};i.onerror=function(){t({status:this.status,statusText:i.statusText})};i.send()}):new Promise(function(n){n(!1)})},isCustomerServiceChatInProgress:function(){return!0}},hooks:{triggeredAtScrollOnRightPosition:function(){toky.container.show()},triggeredAfterRightTimer:function(){toky.container.show()},triggeredAtScrollOnBadPosition:function(){toky.container.hide()},triggeredAtClosedByUser:function(){toky.utils.createCookie("toky_closedByUser","true",390)},triggeredAtClickOnClosedMinimized:function(){toky.utils.createCookie("toky_closedByUser","false",-1)},triggeredAtScrollFromBottomOnRightPosition:function(){toky.container.show()},triggeredAtScrollFromBottomOnBadPosition:function(){toky.container.hide()}},logout:function(){return new Promise(function(n,t){var i=new XMLHttpRequest;i.open("DELETE",toky.settings.baseUrl+"/api/v2/brandcategories/"+toky.settings.group.groupCategoryId+"/token");i.send();i.onload=function(){var r,u;if(i.status==204){for(window.localStorage.removeItem("coachv2-state"),r=0;r<window.localStorage.length;r++)u=localStorage.key(r),u.startsWith("v4-state-")&&window.localStorage.removeItem(u);n(i.response);toky.state==="maximized"&&(toky.utils.createCookie("tokyUserId",toky.userId,-1),toky.maximized.htmlFrame.contentWindow.location.reload(!0),toky.minimized.open())}else t({status:this.status,statusText:i.statusText})};i.onerror=function(){t({status:this.status,statusText:i.statusText})}})}},toky=toky||window.toky,toky.load=function(){if((toky.settings.whiteListUrls.indexOf(toky.utils.getCurrentDomain())!=-1||toky.settings.whiteListUrls.indexOf("*")!=-1||toky.utils.getCurrentDomain()=="tokywoky.com"||!1)&&!toky.settings.group.isDeactivated&&(toky.settings.group.gotMobile||!(toky.utils.device.mobile()||toky.utils.device.tablet()))){toky.utils.registerEventListener();window.toky_zone&&(toky.settings.group.groupCategoryId=toky_zone);var n=toky.utils.readCookie("toky_state");if(toky.state=n?n:"minimized",toky.container.open(),toky.state=="closed")toky.closed.open();else if(toky.state=="minimized")toky.minimized.open();else if(toky.state=="maximized")toky.maximized.open();else return}},toky.container.bottom="0px",toky.container.left="auto",toky.container.right="10px",toky.maximized.width=function(){return toky.utils.device.mobile()?toky.utils.getViewportSize().width-20:310}(),toky.maximized.height=function(){return toky.utils.getViewportSize().height*.75}(),toky.maximized.borderRadius=5,toky.maximized.crossCircleSize=50,toky.maximized.crossCircleBottom=10,toky.maximized.crossCircleRight=5,toky.maximized.crossInnerHtml='<svg style="width: 60%; height: 60%; position: absolute; top: 10px; left: 10px;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30px" version="1.1" height="30px" viewBox="0 0 64 64" enable-background="new 0 0 64 64"><g><path fill="#FFFFFF" d="M28.941,31.786L0.613,60.114c-0.787,0.787-0.787,2.062,0,2.849c0.393,0.394,0.909,0.59,1.424,0.59   c0.516,0,1.031-0.196,1.424-0.59l28.541-28.541l28.541,28.541c0.394,0.394,0.909,0.59,1.424,0.59c0.515,0,1.031-0.196,1.424-0.59   c0.787-0.787,0.787-2.062,0-2.849L35.064,31.786L63.41,3.438c0.787-0.787,0.787-2.062,0-2.849c-0.787-0.786-2.062-0.786-2.848,0   L32.003,29.15L3.441,0.59c-0.787-0.786-2.061-0.786-2.848,0c-0.787,0.787-0.787,2.062,0,2.849L28.941,31.786z" /><\/g><\/svg>',toky.maximized.boxShadow="0px 2px 10px darkGray",toky.maximized.iosUpValue=5,toky.minimized.closePosition={right:0,top:0},toky.minimized.closeSize={width:25,height:25},toky.minimized.notifPosition={right:30,top:0},toky.minimized.notifSize={width:25,height:25},toky.minimized.notifFontFamily="Helvetica,Arial,sans-serif",toky.minimized.notifBackground="red",toky.minimized.notifFontSize="12px",toky.minimized.notifColor="white",toky.minimized.height="auto",toky.minimized.width="auto",toky.closed.notifPosition={right:0,top:0},toky.closed.notifSize={width:25,height:25},toky.closed.notifFontFamily="Helvetica,Arial,sans-serif",toky.closed.notifBackground="red",toky.closed.notifFontSize="12px",toky.closed.notifColor="white",toky.closed.height="auto",toky.closed.width="auto",toky.minimized.ratio=.5,toky.offsetScroll=0,toky.offsetScrollBottom=0,toky.timer=0,toky.tokyStateCookieExpiration=390,toky.tokyStateClosedCookieExpiration=1,(!toky.notifications||toky.notifications.count===0)&&toky.timer>0&&setTimeout(function(){toky.hooks.triggeredAfterRightTimer()},toky.timer),t=toky.settings.isCustomerServiceByEmailEnabled[toky.settings.group.groupCategoryId],typeof toky_settings!="undefined"&&typeof toky_settings.isOnlyCustomerService!="undefined"&&toky_settings.isOnlyCustomerService&&typeof t!="undefined"&&!t)try{window.XMLHttpRequest&&(n=new XMLHttpRequest,n.onreadystatechange=function(){n.readyState==4&&n.status==200&&n.responseText!="false"&&window.toky.load()},n.open("GET",toky.settings.baseUrl+"/api/Admin/Available/"+toky.settings.group.groupId,!0),n.send())}catch(r){}else window.toky.load();/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&(window.onpageshow=function(n){n.persisted&&toky.minimized.open()});typeof toky_order!="undefined"&&toky_order!=null&&typeof toky_order.num!="undefined"&&toky_order.num!=null&&typeof toky_order.value!="undefined"&&toky_order.value!=null&&(typeof toky.container!="undefined"&&toky.container!==null&&typeof toky.container.html!="undefined"&&toky.container.html!==null&&typeof toky.container.html.style!="undefined"&&toky.container.html.style!==null&&(toky.container.html.style.display="none"),toky.settings.group.isDeactivated||toky.utils.readCookie("tokyOrder")!=null&&toky.utils.readCookie("tokyOrder")==toky_order.num||(i(toky_order.num,toky_order.value),toky.utils.createCookie("tokyOrder",toky_order.num)))}})()
